import{d as I,r,q as W,W as Y,j as t}from"./index.esm-CxB9JuV7.js";import{C as T}from"./CharCounter-DMvxk5nY.js";import{O as K,U as F,y as R,b as J,o as E,s as X,u as $,d as D,C as B,I as q,c as ee,T as N,a as U,S as w}from"./TextInput-DoWuG5mI.js";import{I as x}from"./InputError-CCfmAJ6l.js";import{I as f}from"./InputLabel-C3d1gjgo.js";import{S as te}from"./SaveSubmitButton-U6020PzT.js";import{s as A}from"./helpers-BO3HO2Ip.js";import{_ as G}from"./index-CCKphjp8.js";import{S as le}from"./SelectStepCategory-CQm4uqaT.js";import{T as H}from"./ToastItem-BXgzk1yG.js";import{I as z,o as se,a as k,r as re}from"./keyboard-OVBMbBnO.js";import{T as ae}from"./use-resolve-button-type-htMlGX8B.js";import"./bundle-mjs-Bq6clSCD.js";import"./PrimaryButton-B99M2kKG.js";var Z;let ne=(Z=I.startTransition)!=null?Z:function(e){e()};var oe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(oe||{}),ue=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(ue||{});let ie={0:e=>({...e,disclosureState:$(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},4(e){return e.linkedPanel===!0?e:{...e,linkedPanel:!0}},5(e){return e.linkedPanel===!1?e:{...e,linkedPanel:!1}},2(e,l){return e.buttonId===l.buttonId?e:{...e,buttonId:l.buttonId}},3(e,l){return e.panelId===l.panelId?e:{...e,panelId:l.panelId}}},O=r.createContext(null);O.displayName="DisclosureContext";function L(e){let l=r.useContext(O);if(l===null){let d=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,L),d}return l}let M=r.createContext(null);M.displayName="DisclosureAPIContext";function Q(e){let l=r.useContext(M);if(l===null){let d=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(d,Q),d}return l}let V=r.createContext(null);V.displayName="DisclosurePanelContext";function ce(){return r.useContext(V)}function de(e,l){return $(l.type,ie,e,l)}let pe=r.Fragment;function me(e,l){let{defaultOpen:d=!1,...p}=e,j=r.useRef(null),a=R(l,J(g=>{j.current=g},e.as===void 0||e.as===r.Fragment)),c=r.useRef(null),o=r.useRef(null),m=r.useReducer(de,{disclosureState:d?0:1,linkedPanel:!1,buttonRef:o,panelRef:c,buttonId:null,panelId:null}),[{disclosureState:h,buttonId:n},b]=m,v=E(g=>{b({type:1});let y=se(j);if(!y||!n)return;let i=g?g instanceof HTMLElement?g:g.current instanceof HTMLElement?g.current:y.getElementById(n):y.getElementById(n);i==null||i.focus()}),S=r.useMemo(()=>({close:v}),[v]),u=r.useMemo(()=>({open:h===0,close:v}),[h,v]),C={ref:a};return I.createElement(O.Provider,{value:m},I.createElement(M.Provider,{value:S},I.createElement(X,{value:$(h,{0:D.Open,1:D.Closed})},B({ourProps:C,theirProps:p,slot:u,defaultTag:pe,name:"Disclosure"}))))}let ge="button";function xe(e,l){let d=z(),{id:p=`headlessui-disclosure-button-${d}`,...j}=e,[a,c]=L("Disclosure.Button"),o=ce(),m=o===null?!1:o===a.panelId,h=r.useRef(null),n=R(h,l,m?null:a.buttonRef),b=q();r.useEffect(()=>{if(!m)return c({type:2,buttonId:p}),()=>{c({type:2,buttonId:null})}},[p,c,m]);let v=E(i=>{var s;if(m){if(a.disclosureState===1)return;switch(i.key){case k.Space:case k.Enter:i.preventDefault(),i.stopPropagation(),c({type:0}),(s=a.buttonRef.current)==null||s.focus();break}}else switch(i.key){case k.Space:case k.Enter:i.preventDefault(),i.stopPropagation(),c({type:0});break}}),S=E(i=>{switch(i.key){case k.Space:i.preventDefault();break}}),u=E(i=>{var s;re(i.currentTarget)||e.disabled||(m?(c({type:0}),(s=a.buttonRef.current)==null||s.focus()):c({type:0}))}),C=r.useMemo(()=>({open:a.disclosureState===0}),[a]),g=ae(e,h),y=m?{ref:n,type:g,onKeyDown:v,onClick:u}:{ref:n,id:p,type:g,"aria-expanded":a.disclosureState===0,"aria-controls":a.linkedPanel?a.panelId:void 0,onKeyDown:v,onKeyUp:S,onClick:u};return B({mergeRefs:b,ourProps:y,theirProps:j,slot:C,defaultTag:ge,name:"Disclosure.Button"})}let fe="div",ve=K.RenderStrategy|K.Static;function he(e,l){let d=z(),{id:p=`headlessui-disclosure-panel-${d}`,...j}=e,[a,c]=L("Disclosure.Panel"),{close:o}=Q("Disclosure.Panel"),m=q(),h=R(l,a.panelRef,u=>{ne(()=>c({type:u?4:5}))});r.useEffect(()=>(c({type:3,panelId:p}),()=>{c({type:3,panelId:null})}),[p,c]);let n=ee(),b=n!==null?(n&D.Open)===D.Open:a.disclosureState===0,v=r.useMemo(()=>({open:a.disclosureState===0,close:o}),[a,o]),S={ref:h,id:p};return I.createElement(V.Provider,{value:a.panelId},B({mergeRefs:m,ourProps:S,theirProps:j,slot:v,defaultTag:fe,features:ve,visible:b,name:"Disclosure.Panel"}))}let je=F(me),ye=F(xe),be=F(he),_=Object.assign(je,{Button:ye,Panel:be});function Se({title:e,titleId:l,...d},p){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":l},d),e?r.createElement("title",{id:l},e):null,r.createElement("path",{fillRule:"evenodd",d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Ce=r.forwardRef(Se),Pe=()=>{var C,g,y,i;const{product:e,categories_list:l,galleries:d,guarantees:p,suppliers:j}=W().props,[a,c]=r.useState({body:(C=e.body)==null?void 0:C.length,slug:(g=e.slug)==null?void 0:g.length,excerpt:(y=e.excerpt)==null?void 0:y.length}),{data:o,setData:m,put:h,errors:n,processing:b,recentlySuccessful:v}=Y({title:e.title||"",slug:e.slug||"",category_id:e.category_id||"",body:e.body||"",excerpt:e.excerpt||"",live:e.live,popular:e.popular,guarantee:e.guarantee||"",gallery:((i=e.galleries[0])==null?void 0:i.id)||"",product_range:e.product_range||"",supplier:e.supplier||"",supplier_code:e.supplier_code||""}),S=s=>{s.preventDefault(),h(route("dashboard.products.update",e),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{G.custom(P=>t.jsx(H,{t:P,type:"success",title:"Success",message:"Product successfully updated",icon:"check"}))},onError:()=>{G.custom(P=>t.jsx(H,{t:P,type:"error",title:"Error",message:"Something went wrong",icon:"cross"}))}})};function u(s){s.preventDefault(),m({...o,[s.target.id]:s.target.value}),c({...a,[s.target.id]:s.target.value.length})}return t.jsxs("form",{className:"mt-6 space-y-6",onSubmit:S,children:[t.jsxs("div",{children:[t.jsx(f,{htmlFor:"title",value:"Title"}),t.jsx(N,{id:"title",value:o.title,onChange:u,type:"text",className:"mt-1 block w-full"}),t.jsx(x,{message:n.title,className:"mt-2"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"slug",value:"Slug"}),t.jsx(N,{id:"slug",value:A(o.slug),onChange:u,type:"text",className:"mt-1 block w-full"}),t.jsx(T,{count:a.slug,max:100}),t.jsx(x,{message:n.slug,className:"mt-4"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"product_range",value:"Product Range"}),t.jsx(N,{id:"product_range",value:o.product_range,onChange:u,type:"text",className:"mt-1 block w-full"}),t.jsx(x,{message:n.product_range,className:"mt-4"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"category_id",value:"Category"}),t.jsx(le,{id:"category_id",categories:l,defaultValue:o.category_id,onChange:u}),t.jsx(x,{message:n.category_id,className:"mt-2"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"excerpt",value:"Excerpt"}),t.jsx(U,{id:"excerpt",value:o.excerpt,onChange:u,className:"mt-1 block min-h-[100px] w-full"}),t.jsx(T,{count:a.excerpt||0,max:500}),t.jsx(x,{message:n.excerpt,className:"mt-4"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"body",value:"Body"}),t.jsx(U,{id:"body",value:o.body,onChange:u,className:"mt-1 block min-h-[200px] w-full"}),t.jsx(T,{count:a.body||0,max:2500}),t.jsx(x,{message:n.body,className:"mt-4"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"gallery",value:"Gallery"}),t.jsxs(w,{showValue:!0,id:"gallery",name:"gallery",className:"mt-1 w-full",value:o.gallery,onChange:u,children:[t.jsx("option",{value:"",children:"Select a gallery"}),d.map(s=>t.jsx("option",{value:s.id,children:s.title},s.id))]}),t.jsx(x,{message:n.gallery,className:"mt-2"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-6",children:t.jsxs("div",{children:[t.jsx(f,{htmlFor:"guarantee",value:"Guarantee"}),t.jsxs(w,{showValue:!0,id:"guarantee",name:"guarantee",className:"mt-1 w-full",value:o.guarantee,onChange:u,children:[t.jsx("option",{value:"",children:"Select a guarantee date"}),Object.values(p).map((s,P)=>t.jsx("option",{value:s.slug,children:s.title},s.slug))]}),t.jsx(x,{message:n.gallery,className:"mt-2"})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx(f,{htmlFor:"live",value:"Live"}),t.jsxs(w,{id:"live",name:"live",className:"mt-1 w-full",value:o.live,onChange:u,children:[t.jsx("option",{value:"1",children:"Live"}),t.jsx("option",{value:"0",children:"Not Live"})]}),t.jsx(x,{message:n.live,className:"mt-2"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"popular",value:"Popular"}),t.jsxs(w,{id:"popular",name:"popular",className:"mt-1 w-full",value:o.popular,onChange:u,children:[t.jsx("option",{value:"1",children:"Popular"}),t.jsx("option",{value:"0",children:"Not Popular"})]}),t.jsx(x,{message:n.popular,className:"mt-2"})]})]}),t.jsx(_,{children:t.jsxs("div",{className:" space-y-4 rounded-md border border-gray-300 bg-white p-2 dark:border-gray-700 dark:bg-gray-900",children:[t.jsxs(_.Button,{className:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-widest text-gray-700 shadow-sm transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-25 dark:border-gray-500 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 dark:focus:ring-offset-gray-800",children:["Supplier Details"," ",t.jsx("span",{children:t.jsx(Ce,{className:"-mr-2 ml-2 size-4"})})]}),t.jsxs(_.Panel,{className:"grid grid-cols-1 gap-6 md:grid-cols-4",children:[t.jsxs("div",{children:[t.jsx(f,{htmlFor:"supplier",value:"Supplier"}),t.jsxs(w,{showValue:!0,id:"supplier",name:"supplier",className:"mt-1 w-full",value:o.supplier,onChange:u,children:[t.jsx("option",{value:"",children:"Select a supplier"}),Object.values(j).map((s,P)=>t.jsx("option",{value:s.slug,children:s.name},s.slug))]}),t.jsx(x,{message:n.supplier,className:"mt-2"})]}),t.jsxs("div",{children:[t.jsx(f,{htmlFor:"supplier_code",value:"Supplier Code"}),t.jsx(N,{id:"supplier_code",name:"supplier_code",value:A(o.supplier_code),onChange:u,type:"text",className:"mt-1 block w-full"}),t.jsx(x,{message:n.supplier_code,className:"mt-2"})]})]})]})}),t.jsx("div",{className:"flex items-center justify-between",children:t.jsx(te,{processing:b,recentlySuccessful:v})})]})},Me=Pe;export{Me as default};
